<!DOCTYPE html>
<html>
<head>
    <title>Firebase OTP Authentication</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js"></script>
    <script src="firebase-auth-otp.js" defer></script>

    <script>
        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDFdcusLl1MZyT-KTxS4v3zM-g17iAeQqo",
  authDomain: "ngo-portal-165f3.firebaseapp.com",
  projectId: "ngo-portal-165f3",
  storageBucket: "ngo-portal-165f3.appspot.com",
  messagingSenderId: "972109409535",
  appId: "1:972109409535:web:0b554f268e472cbbc130ca",
  measurementId: "G-KVN3BVCYYW"};

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    </script>
</head>
<body>
    <h1>Firebase OTP Authentication</h1>
    <div>
        <input type="text" id="phoneNumber" placeholder="Enter 555 number" />
        <button onclick="sendOtp()">Send OTP</button>
    </div>
    <div>
        <input type="text" id="otp" placeholder="Enter OTP" />
        <button onclick="verifyOtp()">Verify OTP</button>
    </div>

    <script>
        const auth = firebase.auth();

        function sendOtp() {
            const phoneNumber = document.getElementById('phoneNumber').value;
            const appVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
                size: 'invisible',
                callback: (response) => {
                    // reCAPTCHA solved - will proceed with phone number authentication
                }
            });

            auth.signInWithPhoneNumber(phoneNumber, appVerifier)
                .then((confirmationResult) => {
                    // Store the confirmationResult to use it later for verification
                    window.confirmationResult = confirmationResult;
                    alert('OTP sent');
                })
                .catch((error) => {
                    console.error('Error during signInWithPhoneNumber:', error);
                    alert('Failed to send OTP. Please try again.');
                });
        }

        function verifyOtp() {
            const otp = document.getElementById('otp').value;

            window.confirmationResult.confirm(otp)
                .then((result) => {
                    const user = result.user;
                    alert('OTP verified successfully');
                })
                .catch((error) => {
                    console.error('Error during OTP verification:', error);
                    alert('Invalid OTP. Please try again.');
                });
        }
    </script>
    <div id="recaptcha-container"></div>
</body>
</html>
